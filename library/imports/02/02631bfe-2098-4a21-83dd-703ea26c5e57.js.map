{"version":3,"sources":["assets\\Script\\Game.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const {ccclass, property} = cc._decorator;\r\nimport {ethers} from 'ethers/dist/ethers.umd.min.js';\r\n\r\nenum Status {Schedule, Committing, Committed, Confirmmed};\r\nenum Action {SitStill, GoLeft, GoRight, GoUp, GoDown, GoLeftUp, GoLeftDown, GoRightUp, GoRightDown};\r\n\r\n@ccclass\r\nexport default class Game extends cc.Component {\r\n\t\r\n\tid: number = 0;\r\n\tt: number = 0;\r\n\tcurrentSchedule: number = 0;\r\n\ttoCommit: number = 0;\r\n\tbalance: number = 0;\r\n\tgold: number = 0;\r\n\tpendingGold: number = 0;\r\n\thp: number = 0;\r\n\thep: number = 0;\r\n\tendRound: number = 225;\r\n\tminimapSize: number = 51;\r\n\tmapSize: number = 51;\r\n\teventNumber: number = 0;\r\n\tplayerAddress: string = \"\";\r\n\tuserName: string = 'vistor';\r\n\tmode: string = \"view\";\r\n\tisBusy: bool = false;\r\n\tregisterAddress: string = '0x76f099cd22E737FC38f17FA07aA95dACe8e53e4e';\r\n\trogueLandAddress: string = '0x4fB911AD82321a3639626260156b0f0ea3bd0d02';\r\n\trogueLandContract: any = null;\r\n\tprovider: any = null;\r\n\twallet: any = null;\r\n\tvalidToGo: any = {};\r\n\tplayerInfo: any = {x: 0, y: 0, t: 0};\r\n\ttoPick: any = {x: 0, y: 0};\r\n\tminimapCenter: any = {x: 0, y: 0};\r\n\ttimeList: any[] = [];\r\n\tpunks: any[] = [];\r\n\tchests: any[] = [];\r\n\ttiledLayer : cc.TiledLayer = null;\r\n\t\r\n\t@property(cc.Label)\r\n    label: cc.Label = null;\r\n\t\r\n\t@property(cc.Label)\r\n    switchLabel: cc.Label = null;\r\n\t\r\n\t@property(cc.Label)\r\n    messageLabel: cc.Label = null;\r\n\t\r\n\t@property(cc.Button)\r\n    modeButton: cc.Button = null;\r\n\t\r\n\t@property(cc.Button)\r\n    swapButton: cc.Button = null;\r\n\t\r\n\t@property(cc.Button)\r\n    makeButton: cc.Button = null;\r\n\t\r\n\t@property(cc.Button)\r\n    useButton: cc.Button = null;\r\n\t\r\n\t@property(cc.TiledMap)\r\n    smallMap: cc.TiledMap = null;\r\n\t\r\n\t@property(cc.TiledMap)\r\n    gameMap: cc.TiledMap = null;\r\n\r\n    @property\r\n    text: string = 'hello';\r\n\t\r\n\t@property(cc.Prefab)\r\n    grassPrefab: cc.Prefab = null;\r\n\t\r\n\t@property(cc.Prefab)\r\n    crossPrefab: cc.Prefab = null;\r\n\t\r\n\t@property(cc.Prefab)\r\n    chestPrefab: cc.Prefab = null;\r\n\t\r\n\t@property(cc.Prefab)\r\n    numberPrefab: cc.Prefab = null;\r\n\t\r\n\t@property(cc.Prefab)\r\n    punkPrefab: cc.Prefab = null;\r\n\t\r\n\t@property(cc.Prefab)\r\n    redStarPrefab: cc.Prefab = null;\r\n\t\r\n\t@property(cc.Prefab)\r\n    blueStarPrefab: cc.Prefab = null;\r\n\t\r\n\t@property(cc.Prefab)\r\n    diePrefab: cc.Prefab = null;\r\n\t\r\n\t@property(cc.Prefab)\r\n    punkInfoPrefab: cc.Prefab = null;\r\n\t\r\n\t@property(cc.Prefab)\r\n    goldInfoPrefab: cc.Prefab = null;\r\n\t\r\n\t@property(cc.JsonAsset)\r\n    registerJson: cc.JsonAsset = null;\r\n\t\r\n\t@property(cc.JsonAsset)\r\n    rogueLandJson: cc.JsonAsset = null;\r\n\t\r\n\t@property(cc.JsonAsset)\r\n    loserpunkJson: cc.JsonAsset = null;\r\n\t\r\n\t// Player 节点，用于获取主角的位置\r\n\t@property(cc.Node)\r\n    player: cc.Node = null;\r\n\t\r\n\t// 放置时间按钮\r\n\t@property(cc.Node)\r\n    time_button_group: cc.Node = null;\r\n\t\r\n\t// 设置节点，用户交互按钮\r\n\t@property(cc.Node)\r\n    button_group_2: cc.Node = null;\r\n\t\r\n\t// Camera 节点，用于获取摄像头的位置\r\n\t@property(cc.Node)\r\n    camera: cc.Node = null;\r\n\t\r\n\tspawnNewDieDialog (name) {\r\n        // 使用给定的模板在场景中生成一个新节点\r\n        var newDialog = cc.instantiate(this.diePrefab);\r\n        // 将新增的节点添加到 Canvas 节点下面\r\n        this.node.addChild(newDialog);\r\n\t\tnewDialog.zIndex = 6;\r\n        // 设置宝箱的位置\r\n        newDialog.setPosition(cc.v2(this.player.x, this.player.y));\r\n\t\t// 在对话框脚本组件上保存 Game 对象的引用\r\n        newDialog.getComponent('DieDialog').setText(name);\r\n    },\r\n\t\r\n\tasync spawnNewPunkInfo (id, x, y) {\r\n        var newDialog = cc.instantiate(this.punkInfoPrefab);\r\n        this.node.addChild(newDialog);\r\n\t\tnewDialog.zIndex = 6;\r\n        newDialog.setPosition(cc.v2(this.player.x, this.player.y));\r\n        cc.log(id, x, y, this.t)\r\n\t\tcc.log(this.playerInfo)\r\n\t\tnewDialog.getComponent('PunkInfo').game = this;\r\n\t\tnewDialog.getComponent('PunkInfo').setId(id);\r\n\t\tconst info = await this.getPunkInfo(id);\r\n\t\tnewDialog.getComponent('PunkInfo').setInfo(info);\r\n\t\tif (id != this.id && this.t == this.playerInfo.t && Math.abs(x-this.playerInfo.x)<=1 && Math.abs(y-this.playerInfo.y)<=1 && !info.isMoving && Math.abs(x)<25 && Math.abs(y)<25 && Math.abs(this.playerInfo.x)<25 && Math.abs(this.playerInfo.y)<25) {\r\n\t\t\tnewDialog.getComponent('PunkInfo').setAttack(true);\r\n\t\t}\r\n    },\r\n\t\r\n\tasync spawnNewGoldInfo (x, y) {\r\n        var newDialog = cc.instantiate(this.goldInfoPrefab);\r\n        this.node.addChild(newDialog);\r\n\t\tnewDialog.zIndex = 6;\r\n        newDialog.setPosition(cc.v2(this.player.x, this.player.y));\r\n\t\t// 在对话框脚本组件上保存 Game 对象的引用\r\n\t\tconst info = await this.rogueLandContract.goldOn(x, y);\r\n\t\tnewDialog.getComponent('GoldDialog').setLabel({amount: info.amount, punkNumber: info.punkNumber, time: info.vaildTime-this.playerInfo.t});\r\n    },\r\n\t\r\n\tspawnNewGrass (x, y) {\r\n        // 使用给定的模板在场景中生成一个新节点\r\n        var newGrass = cc.instantiate(this.grassPrefab);\r\n        // 将新增的节点添加到 Canvas 节点下面\r\n        this.node.addChild(newGrass);\r\n        // 设置草地的位置\r\n        newGrass.setPosition(cc.v2(x,y));\r\n\t\t// 在草地脚本组件上保存 Camera 对象的引用\r\n        newGrass.getComponent('Grass').camera = this.camera;\r\n\t\t\r\n\t\t//newGrass.on(cc.Node.EventType.TOUCH_START,function(t){cc.log(\"触摸开始\");},this)\r\n        //监听\r\n        newGrass.on(cc.Node.EventType.TOUCH_MOVE, this.onTouchMove, this);\r\n        newGrass.on(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this);\r\n        newGrass.on(cc.Node.EventType.TOUCH_CANCEL, this.onTouchEnd, this);\r\n    },\r\n\t\r\n\tspawnNewCross (n) {\r\n        for (let x=-n; x<=n; x++) {\r\n\t\t\t// 使用给定的模板在场景中生成一个新节点\r\n            var newCross1 = cc.instantiate(this.crossPrefab);\r\n            this.node.addChild(newCross1);\r\n            newCross1.setPosition(cc.v2(x*64,n*64));\r\n\t\t\tnewCross1.zIndex = 2;\r\n\t\t\tvar newCross2 = cc.instantiate(this.crossPrefab);\r\n            this.node.addChild(newCross2);\r\n            newCross2.setPosition(cc.v2(x*64,-n*64));\r\n\t\t\tnewCross2.zIndex = 2;\r\n\t\t}\r\n\t\tfor (let y=-n+1; y<n; y++) {\r\n\t\t\t// 使用给定的模板在场景中生成一个新节点\r\n            var newCross1 = cc.instantiate(this.crossPrefab);\r\n            this.node.addChild(newCross1);\r\n            newCross1.setPosition(cc.v2(n*64,y*64));\r\n\t\t\tnewCross1.zIndex = 2;\r\n\t\t\tvar newCross2 = cc.instantiate(this.crossPrefab);\r\n            this.node.addChild(newCross2);\r\n            newCross2.setPosition(cc.v2(-n*64,y*64));\r\n\t\t\tnewCross2.zIndex = 2;\r\n\t\t}\r\n    },\r\n\t\r\n\tspawnNewChest (x, y) {\r\n        // 使用给定的模板在场景中生成一个新节点\r\n        var newChest = cc.instantiate(this.chestPrefab);\r\n        // 将新增的节点添加到 Canvas 节点下面\r\n        this.node.addChild(newChest);\r\n\t\tnewChest.zIndex = 2;\r\n        // 设置宝箱的位置\r\n        newChest.setPosition(cc.v2(x,y));\r\n\t\tthis.chests.push(newChest)\r\n\t\t\r\n\t\tnewChest.on(cc.Node.EventType.TOUCH_START, function(event){\r\n\t\t\tthis.spawnNewGoldInfo(x/64, y/64);\r\n\t\t}, this)\r\n    },\r\n\t\r\n\tspawnNewPunk (x, y, id) {\r\n        //cc.log(x, y, id.toString())\r\n\t\t// 使用给定的模板在场景中生成一个新节点\r\n        var newPunk = cc.instantiate(this.punkPrefab);\r\n\t\tlet newStar;\r\n\t\tif (id % 2 == 0) {\r\n\t\t\tnewStar = cc.instantiate(this.redStarPrefab);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tnewStar = cc.instantiate(this.blueStarPrefab);\r\n\t\t}\r\n        // 将新增的节点添加到 Canvas 节点下面\r\n        this.node.addChild(newPunk);\r\n\t\tnewPunk.addChild(newStar)\r\n\t\tnewStar.setPosition(cc.v2(20,20));\r\n\t\tnewPunk.zIndex = 4;\r\n        // 设置punk的位置\r\n        newPunk.setPosition(cc.v2(x,y));\r\n\t\tthis.punks.push(newPunk)\r\n\t\t\r\n\t\tif (id > 0) {\r\n\t\t\t//console.log(this.loserpunkJson.json[id-1])\r\n\t\t\tlet remoteUrl = \"https://www.losernft.org/ipfs/\"+this.loserpunkJson.json[id-1].hash\r\n\t\t\tlet sprite = newPunk.getComponent(cc.Sprite)\r\n\t\t\tcc.assetManager.loadRemote<cc.Texture2D>(remoteUrl, { ext: '.png', cacheEnabled: true }, function (err, pic) {\r\n              if (err) {\r\n                cc.log('LoadNetImg load error,error:' + err)\r\n                return\r\n              }\r\n              sprite.spriteFrame = new cc.SpriteFrame(pic)\r\n            });\r\n\t\t}\r\n\t\t\r\n\t\tnewPunk.on(cc.Node.EventType.TOUCH_START, function(event){\r\n\t\t\tthis.spawnNewPunkInfo(id, x/64, y/64);\r\n\t\t}, this)\r\n    },\r\n\t\r\n\tasync commitMove (x, y, action) {\r\n\t\tif (this.balance < 0) return\r\n\t\tif (!this.validToGo[\"x\"+x+\"y\"+y]) {\r\n\t\t\tcc.log('invalid position')\r\n\t\t\treturn\r\n\t\t}\r\n\t\t// 增加1回合\r\n\t\tthis.t ++\r\n\t\t// 更新地图\r\n\t\tthis.resetMinimap()\r\n\t\tthis.updateMap()\r\n\t\t// 自动提交\r\n\t\tconst rogueLandSigner = this.rogueLandContract.connect(this.wallet)\r\n\t\ttry {\r\n\t\t\tconst tx = await rogueLandSigner.scheduleAction(this.id, action, {gasLimit: 300000, gasPrice: 1000000000})\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tcc.log(e)\r\n\t\t}\r\n\t\tthis.balance = this.balance - 3\r\n\t\tthis.gold = Number(this.gold) + Number(this.pendingGold)\r\n\t\tthis.pendingGold = 0\r\n\t\tif (this.gold >= 1000) {\r\n\t\t    this.swapButton.interactable = true\r\n\t\t}\r\n    },\r\n\t\r\n\tspawnTimeButton (x, y, t) {\r\n\t\t// 使用给定的模板在场景中生成一个新节点\r\n        var newNumber = cc.instantiate(this.numberPrefab)\r\n        // 将新增的节点添加到 Canvas 节点下面\r\n        this.time_button_group.addChild(newNumber)\r\n        // 设置数字的位置\r\n        newNumber.setPosition(cc.v2(x,y))\r\n\t\tlet color = new cc.Color(255,255,255)\r\n\t\tnewNumber.color = color\r\n\t\tnewNumber.getComponent(cc.Label).string = t\r\n\t\tnewNumber.on(cc.Node.EventType.TOUCH_START, function(event){\r\n\t\t\tif (this.mode == 'view') {\r\n\t\t\t\tthis.t = newNumber.getComponent(cc.Label).string;\r\n\t\t\t    this.resetMinimap()\r\n\t\t\t\tthis.updateMap()\r\n\t\t\t}\r\n\t\t\tcc.log(newNumber.getComponent(cc.Label).string);\r\n\t\t}, this)\r\n\t\tthis.timeList[t] = newNumber\r\n    },\r\n\t\r\n\tchangeTimeButton () {\r\n\t\tlet t = this.t<2 ? 2 : this.t\r\n\t\tfor (let i=0; i<5; i++) {\r\n\t\t\tthis.timeList[i].getComponent(cc.Label).string = t-2+i\r\n\t\t\tif (t-2+i == this.t) {\r\n\t\t\t\tthis.timeList[i].getComponent(cc.Label).fontSize = 30\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.timeList[i].getComponent(cc.Label).fontSize = 20\r\n\t\t\t}\r\n\t\t\tif (t-2+i <= this.playerInfo.t) {\r\n\t\t\t\tlet color = new cc.Color(255,128,128)\r\n\t\t\t\tthis.timeList[i].color = color\r\n\t\t\t}\r\n\t\t\telse if (t-2+i <= this.currentSchedule) {\r\n\t\t\t\tlet color = new cc.Color(0,0,255)\r\n\t\t\t\tthis.timeList[i].color = color\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tlet color = new cc.Color(255,255,255)\r\n\t\t\t\tthis.timeList[i].color = color\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tsetLabel (t, pos) {\r\n\t\tconst lang = cc.sys.localStorage.getItem('lang')\r\n\t\tif (this.isBusy) {\r\n\t\t\tif (lang === 'zh') {\r\n\t\t\t    this.text = \"更新中...\"\r\n\t\t    }\r\n\t\t\telse {\r\n\t\t\t\tthis.text = \"updating...\"\r\n\t\t\t}\t\t\t\r\n\t\t}\r\n\t\telse if (this.playerInfo.t == 0) {\r\n\t\t\tif (lang === 'zh') {\r\n\t\t\t    this.text = `游戏尚未开始 行动点: ${this.balance}`\r\n\t\t    }\r\n\t\t\telse {\r\n\t\t\t\tthis.text = `Game not start yet ACTION POINTS: ${this.balance}`\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (this.playerInfo.t == this.endRound) {\r\n\t\t\tif (lang === 'zh') {\r\n\t\t\t    this.text = `游戏结束 行动点: ${this.balance}`\r\n\t\t    }\r\n\t\t\telse {\r\n\t\t\t\tthis.text = `Game Over ACTION POINTS: ${this.balance}`\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (lang === 'zh') {\r\n\t\t\t    this.text = `金币: ${this.gold}(${this.pendingGold}) 行动点: ${this.balance} 生命值: ${this.hp} 药水: ${this.hep}\\n${this.endRound-this.t}回合后游戏结束`\r\n\t\t    }\r\n\t\t\telse {\r\n\t\t\t\tthis.text = `GOLD: ${this.gold}(${this.pendingGold}) ACTION POINTS: ${this.balance} HP: ${this.hp} HEP: ${this.hep}\\nGame will end in {this.endRound-this.t} rounds`\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\tthis.label.string = this.text;\r\n\t}\r\n\t\r\n\tsetAttackMessage (A, B, n) {\r\n\t\tconst lang = cc.sys.localStorage.getItem('lang')\r\n\t\tif (lang === 'zh') {\r\n\t\t\tthis.messageLabel.string = `${A}攻击了${B}，造成了${n}点伤害\\n` + this.messageLabel.string\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.messageLabel.string = `${A} hits ${B}，deals ${n} points of damage\\n` + this.messageLabel.string\r\n\t\t}\r\n\t}\r\n\t\r\n\tsetDieMessage (A, B, n) {\r\n\t\tconst lang = cc.sys.localStorage.getItem('lang')\r\n\t\tif (lang === 'zh') {\r\n\t\t\tthis.messageLabel.string = `${A}击杀了${B}，获得了${n}个金币\\n` + this.messageLabel.string\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.messageLabel.string = `${A} killed ${B}，rob ${n} golds\\n` + this.messageLabel.string\r\n\t\t}\r\n\t\tthis.spawnNewDieDialog(B)\r\n\t}\r\n\t\r\n\tasync swap () {\r\n\t\tthis.swapButton.interactable = false\r\n\t\tif (this.gold < 1200) {\r\n\t\t\tthis.makeButton.interactable = false\r\n\t\t}\r\n\t\tconst rogueLandSigner = this.rogueLandContract.connect(this.wallet)\r\n\t\ttry {\r\n\t\t\tconst tx = await rogueLandSigner.swapOKT(this.playerAddress, {gasPrice: 1000000000})\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tcc.log(e)\r\n\t\t}\r\n\t\tthis.balance = this.balance + 100\r\n\t\tthis.gold = this.gold - 1000\r\n\t\t\r\n\t\tif (this.gold >= 1000) {\r\n\t\t\tthis.swapButton.interactable = true\r\n\t\t}\r\n\t\t\r\n    },\r\n\t\r\n\tasync makeHEP () {\r\n\t\tthis.makeButton.interactable = false\r\n\t\tconst rogueLandSigner = this.rogueLandContract.connect(this.wallet)\r\n\t\ttry {\r\n\t\t\tconst tx = await rogueLandSigner.swapHEP({gasPrice: 1000000000})\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tcc.log(e)\r\n\t\t}\r\n\t\tthis.balance = this.balance - 2\r\n\t\tthis.hep ++\r\n\t\tthis.gold = this.gold - 200\r\n\t\tthis.useButton.interactable = true\r\n    },\r\n\t\r\n\tasync useHEP () {\r\n        this.useButton.interactable = false\r\n\t\tconst rogueLandSigner = this.rogueLandContract.connect(this.wallet)\r\n\t\ttry {\r\n\t\t\tconst tx = await rogueLandSigner.useHEP(this.id, {gasPrice: 1000000000})\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tcc.log(e)\r\n\t\t}\r\n\t\tthis.balance = this.balance - 2\r\n\t\tthis.hep --\r\n\t\tthis.hp = Math.min(this.hp+10, 15)\r\n\t\tif (this.hep > 0) {\r\n\t\t\tthis.useButton.interactable = true\r\n\t\t}\r\n    },\r\n\t\r\n\tasync attack (to, _seed, _name) {\r\n        const abiCoder = new ethers.utils.AbiCoder();\r\n\t\tcc.log(this.seed, _seed)\r\n\t\tconst seedA = ethers.BigNumber.from(ethers.utils.keccak256(abiCoder.encode([ \"uint\", \"uint\" ], [this.id, _seed])))\r\n\t\tconst seedB = ethers.BigNumber.from(ethers.utils.keccak256(abiCoder.encode([ \"uint\", \"uint\" ], [to, this.seed])))\r\n\t\tthis.seed = seedB\r\n\t\t\r\n\t\tif (this.balance < 0) return;\r\n\t\tconst rogueLandSigner = this.rogueLandContract.connect(this.wallet)\r\n\t\ttry {\r\n\t\t\tconst tx = await rogueLandSigner.attack(this.id, to, {gasPrice: 1000000000})\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tcc.log(e)\r\n\t\t}\r\n\t\t\r\n\t\tconst diceA = seedA.mod(100)\r\n\t\tconst diceB = seedB.mod(100)\r\n\t\tcc.log(Number(diceA), Number(diceB))\r\n\t\t\r\n\t\tthis.balance = this.balance - 5\r\n\t\t\r\n\t\tlet _damage = 0\r\n\t\tif (diceA/5+1 < 19) {\r\n\t\t\t_damage = (diceA)%5+1\r\n\t\t\tthis.setAttackMessage(this.userName, _name, diceA%5+1)\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.setAttackMessage(this.userName, _name, 0)\r\n\t\t}\r\n\t\t\r\n\t\tif (diceB/5+1 < 19) {\r\n\t\t\tthis.hp -= ((diceB)%5+1)\r\n\t\t\tthis.setAttackMessage(_name, this.userName, diceB%5+1)\r\n\t\t\tif (this.hp <= 0) {\r\n\t\t\t\tthis.setDieMessage(_name, this.userName, Number(this.gold)+Number(this.pendingGold))\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.setAttackMessage(_name, this.userName, 0)\r\n\t\t}\r\n\t\t\r\n\t\treturn {damage: _damage, newSeed: seedA, name: this.userName}\r\n\t\t\r\n\t\t//cc.log(tx.gasPrice/1e9*tx.gasLimit)\r\n\t\t//this.updateMap()\r\n\t\t//this.getGoldInfo()\r\n    },\r\n\t\r\n\tasync getPunkInfo (id) {\r\n\t\tconst punkInfo = await this.rogueLandContract.getPunkInfo(id)\r\n\t\treturn  {\r\n\t\t\t        name: punkInfo.name, \r\n\t\t\t\t\tisMoving: Number(punkInfo.isMoving), \r\n\t\t            gold: Number(punkInfo.gold), \r\n\t\t\t\t\tpendingGold: Number(punkInfo.pendingGold), \r\n\t\t\t\t\thp: Number(punkInfo.hp), \r\n\t\t\t\t\thep: Number(punkInfo.hep), \r\n\t\t\t\t\tseed: punkInfo.seed.toHexString(),\r\n\t\t\t\t    address: punkInfo.player\r\n\t\t\t    }\r\n    },\r\n\t\r\n\tasync loadPunk () {\r\n        let punkId = JSON.parse(cc.sys.localStorage.getItem('myPunk'))\r\n\t\tif (punkId > 0) {\r\n\t\t  this.id = punkId\r\n\t\t  let sprite = this.node.getChildByName('Player').getComponent(cc.Sprite)\r\n\t\t  let remoteUrl = \"https://www.losernft.org/ipfs/\"+this.loserpunkJson.json[punkId-1].hash\r\n\t      cc.assetManager.loadRemote<cc.Texture2D>(remoteUrl, { ext: '.png', cacheEnabled: true }, function (err, pic) {\r\n            if (err) {\r\n              cc.log('LoadNetImg load error,error:' + err)\r\n              return\r\n            }\r\n            sprite.spriteFrame = new cc.SpriteFrame(pic)\r\n          });\r\n\t\t}\r\n\t\telse {\r\n\t\t\tcc.log(\"no punk\")\r\n\t\t}\r\n    },\r\n\t\r\n\tasync getStatus () {\r\n\t\tlet walletData = JSON.parse(cc.sys.localStorage.getItem('wallet'))\r\n\t\tconst walletPrivateKey = new ethers.Wallet(walletData.privateKey)\r\n\t\tthis.playerAddress = walletData.address;\r\n\t\tthis.provider = new ethers.providers.JsonRpcProvider(\"https://exchaintestrpc.okex.org\")\r\n\t\tthis.wallet = walletPrivateKey.connect(this.provider)\r\n\t\tthis.rogueLandContract = new ethers.Contract(this.rogueLandAddress, this.rogueLandJson.json.abi, this.provider)\r\n\t\t//this.modeButton.interactable = false\r\n\t\tthis.goViewMode()\r\n\t\tthis.mapSize = 24\r\n\t\tthis.spawnNewCross(Number(this.mapSize)+1)\r\n    },\r\n\t\r\n\tsetMinimapBoundary () {\r\n\t\tconst n = Number(this.mapSize)+1\r\n\t\tfor (let x=-n; x<=n; x++) {\r\n\t\t\tthis.setMiniMap(x, n, 2)\r\n\t\t\tthis.setMiniMap(x, -n, 2)\r\n\t\t}\r\n\t\tfor (let y=-n+1; y<n; y++) {\r\n\t\t\tthis.setMiniMap(n, y, 2)\r\n\t\t\tthis.setMiniMap(-n, y, 2)\r\n\t\t}\r\n\t}\r\n\t\r\n\tresetMinimap () {\r\n\t\tfor (let i=0; i<=50; i++) {\r\n\t\t\tfor (let j=0; j<=50; j++) {\r\n\t\t\t\tthis.tiledLayer.setTileGIDAt(1, i, j, 0)\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setMinimapBoundary()\r\n\t}\r\n\t\r\n\tloadAccount (e, msg) {\r\n\t\tcc.director.loadScene(\"welcome\");\r\n    },\r\n\t\r\n\tasync updateMap () {\r\n      this.changeTimeButton()\r\n\t  if (!this.isBusy) {\r\n\t\tthis.isBusy = true;\r\n\t\tconst center = this.getPosition()\r\n\t\tlet x1 = center.x - 7\r\n\t\tlet x2 = center.x + 7\r\n\t\tlet y1 = center.y - 5\r\n\t\tlet y2 = center.y + 5\r\n\t\tconst map = await this.rogueLandContract.getEvents(x1, y1, x2, y2, this.t)\r\n\t\twhile (this.punks.length > 0) {\r\n\t\t\tlet node = this.punks.pop()\r\n\t\t\tnode.destroy();\r\n\t\t}\r\n\t\twhile (this.chests.length > 0) {\r\n\t\t\tlet node = this.chests.pop()\r\n\t\t\tnode.destroy();\r\n\t\t}\r\n\t\tlet i = 0\r\n        for (let x=x1; x<=x2; x++) {\r\n          for (let y=y1; y<=y2; y++) {\r\n            if (map[i] != 0 && !(this.mode == \"schedule\" && map[i] == this.id)) {\r\n\t\t\t  //cc.log(map[i].movingPunk, x, y)\r\n\t\t\t  this.spawnNewPunk (x*64, y*64, map[i])\r\n\t\t\t  if (map[i] % 2 == 0) {\r\n\t\t\t\t  this.setMiniMap(x, y, 4)\r\n\t\t\t  }\r\n\t\t\t  else {\r\n\t\t\t\t  this.setMiniMap(x, y, 5)\r\n\t\t\t  }\r\n\t\t\t  this.validToGo[\"x\"+x+\"y\"+y] = false\r\n            }\r\n\t\t\telse {\r\n\t\t\t  this.validToGo[\"x\"+x+\"y\"+y] = true\r\n\t\t\t}\r\n            i ++;\r\n          }\r\n        }\r\n\t\tthis.setMiniMap(this.playerInfo.x, this.playerInfo.y, 6)\r\n\t\tthis.isBusy = false;\r\n\t  }\r\n\t  else {\r\n\t\t  cc.log('isBusy')\r\n\t  }\r\n\t}\r\n\t\r\n\tasync getEvent() {\r\n\t\tthis.goViewMode()\r\n\t\tconst statusInfo = await this.rogueLandContract.getEvent(this.id)\r\n\t\tif (statusInfo.t > this.eventNumber) {\r\n\t\t\tthis.toPick.x = statusInfo.x\r\n\t\t\tthis.toPick.y = statusInfo.y\r\n\t\t\tthis.eventNumber = statusInfo.t\r\n\t\t\tthis.pick()\r\n\t\t}\r\n\t}\r\n\t\r\n\tasync goViewMode() {\r\n\t\tconst statusInfo = await this.rogueLandContract.getCurrentStatus(this.id)\r\n\t\tthis.mode = \"view\"\r\n\t\tthis.t = statusInfo.t\r\n\t\tthis.playerInfo.t = statusInfo.t\r\n\t\tthis.playerInfo.x = statusInfo.x\r\n\t\tthis.playerInfo.y = statusInfo.y\r\n\t\tthis.player.zIndex = 0\r\n\t\tthis.player.x = statusInfo.x * 64\r\n\t\tthis.player.y = statusInfo.y * 64\r\n\t\tthis.minimapCenter.x = statusInfo.x\r\n\t\tthis.minimapCenter.y = statusInfo.y\r\n\t\tthis.resetMinimap()\r\n\t\tthis.updateMap()\r\n\t\tif (this.playerInfo.t == this.endRound) {\r\n\t\t\tthis.modeButton.interactable = false\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst myPunk = await this.rogueLandContract.getPunkInfo(this.id)\r\n\t\tthis.gold = myPunk.gold\r\n\t\tthis.pendingGold = myPunk.pendingGold\r\n\t\tthis.hp = myPunk.hp\r\n\t\tthis.hep = myPunk.hep\r\n\t\tif (myPunk.name == \"\") {\r\n\t\t\tthis.userName = myPunk.player.slice(0, 6)\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.userName = myPunk.name\r\n\t\t}\r\n\t\tthis.seed = myPunk.seed.toHexString()\r\n        if (this.gold >= 1000 && this.playerInfo.t < this.endRound) {\r\n\t\t    this.swapButton.interactable = true\r\n\t\t}\r\n\t\tif (this.hep > 0 && this.playerInfo.t < this.endRound) {\r\n\t\t    this.useButton.interactable = true\r\n\t\t}\r\n\t\tconst okt = await this.wallet.getBalance()\r\n\t\tthis.balance = Math.floor(ethers.utils.formatEther(okt)*10000)\r\n\t\tconst isCook = await await this.rogueLandContract.cooked(this.id, this.t)\r\n\t\tif (!isCook && this.gold >= 200) {\r\n\t\t    this.makeButton.interactable = true\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\tasync goScheduleMode() {\r\n\t\tconst statusInfo = await this.rogueLandContract.getScheduleInfo(this.id)\r\n\t\tthis.mode = \"schedule\"\r\n\t\tthis.t = Number(statusInfo.t) + 1\r\n\t\tthis.currentSchedule = statusInfo.t\r\n\t\tthis.player.zIndex = 3\r\n\t\tthis.toCommit = statusInfo.t\r\n\t\tthis.player.x = statusInfo.x * 64\r\n\t\tthis.player.y = statusInfo.y * 64\r\n\t\tthis.resetMinimap()\r\n\t\tthis.updateMap()\r\n\t}\r\n\t\r\n\tswitchMode (e, msg) {\r\n        const lang = cc.sys.localStorage.getItem('lang')\r\n\t\tif (this.mode == \"view\" && this.id > 0) {\r\n\t\t\tthis.goScheduleMode()\r\n\t\t\tif (lang === 'zh') {\r\n\t\t\t    this.switchLabel.string = \"退出规划\"\r\n\t\t    }\r\n\t\t    else {\r\n\t\t\t    this.switchLabel.string = \"View Mode\"\r\n\t\t    }\r\n\t\t}\r\n\t\telse if (this.mode == \"schedule\") {\r\n\t\t\tthis.goViewMode()\r\n\t\t\tif (lang === 'zh') {\r\n\t\t\t    this.switchLabel.string = \"准备行动\"\r\n\t\t    }\r\n\t\t    else {\r\n\t\t\t    this.switchLabel.string = \"Take Actions\"\r\n\t\t    }\r\n\t\t}\r\n    },\r\n\t\r\n\tsetPosition (node, x, y) {\r\n\t\tnode.x = x\r\n\t\tnode.y = y\r\n\t}\r\n\t\r\n\tgetPosition () {\r\n\t\treturn {x: Math.round(this.player.x/64), y: Math.round(this.player.y/64)}\r\n\t}\r\n    \r\n\tupdate(dt) {\r\n\t\tlet x = this.player.x\r\n\t\tlet y = this.player.y\r\n\t\tthis.setPosition(this.camera, x, y)\r\n\t\tthis.setPosition(this.label.node, x, y+250)\r\n\t\tthis.setPosition(this.time_button_group, x, y-280)\r\n\t\tthis.setPosition(this.button_group_2, x+330, y+140)\r\n\t\tthis.setLabel(this.t, this.getPosition())\r\n\t\tif (this.mode == \"schedule\") {this.setPosition(this.playerInfo, x/64, y/64)}\r\n\t}\r\n\t\r\n\tclick_arrow (e, msg) {\r\n\t\t// 任何都会导致punk无法拾取lowb\r\n        // this.pickButton.interactable = false\r\n\t\tif (this.isBusy) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tswitch(msg) {\r\n\t\t\tcase \"left\":\r\n\t\t\t    if (this.mode == \"schedule\") {\r\n\t\t\t      this.commitMove(this.player.x/64-1, this.player.y/64, Action.GoLeft)\r\n\t\t        }\r\n\t\t\t\tthis.player.getComponent('Player').moveWest()\r\n                break;\r\n            case \"right\":\r\n\t\t\t    if (this.mode == \"schedule\") {\r\n\t\t\t      this.commitMove(this.player.x/64+1, this.player.y/64, Action.GoRight)\r\n\t\t        }\r\n                this.player.getComponent('Player').moveEast()\r\n                break;\r\n\t\t    case \"down\":\r\n                if (this.mode == \"schedule\") {\r\n\t\t\t      this.commitMove(this.player.x/64, this.player.y/64-1, Action.GoDown)\r\n\t\t        }\r\n\t\t\t\tthis.player.getComponent('Player').moveSouth()\r\n                break;\r\n            case \"up\":\r\n                if (this.mode == \"schedule\") {\r\n\t\t\t      this.commitMove(this.player.x/64, this.player.y/64+1, Action.GoUp)\r\n\t\t        }\r\n\t\t\t\tthis.player.getComponent('Player').moveNorth()\r\n                break;\r\n\t\t\tcase \"left-up\":\r\n\t\t\t    if (this.mode == \"schedule\") {\r\n\t\t\t      this.commitMove(this.player.x/64-1, this.player.y/64+1, Action.GoLeftUp)\r\n\t\t        }\r\n\t\t\t\tthis.player.getComponent('Player').moveNorthWest()\r\n                break;\r\n            case \"right-down\":\r\n\t\t\t    if (this.mode == \"schedule\") {\r\n\t\t\t      this.commitMove(this.player.x/64+1, this.player.y/64-1, Action.GoRightDown)\r\n\t\t        }\r\n                this.player.getComponent('Player').moveSouthEast()\r\n                break;\r\n\t\t    case \"right-up\":\r\n                if (this.mode == \"schedule\") {\r\n\t\t\t      this.commitMove(this.player.x/64+1, this.player.y/64+1, Action.GoRightUp)\r\n\t\t        }\r\n\t\t\t\tthis.player.getComponent('Player').moveNorthEast()\r\n                break;\r\n            case \"left-down\":\r\n                if (this.mode == \"schedule\") {\r\n\t\t\t      this.commitMove(this.player.x/64-1, this.player.y/64-1, Action.GoLeftDown)\r\n\t\t        }\r\n\t\t\t\tthis.player.getComponent('Player').moveSouthWest()\r\n                break;\r\n\t\t\tcase \"+\":\r\n                if (this.mode == \"view\" && !this.isBusy) {\r\n\t\t\t\t\tthis.t ++\r\n\t\t\t\t\tthis.resetMinimap()\r\n\t\t\t\t\tthis.updateMap()\r\n\t\t\t\t}\r\n                break;\r\n            case \"-\":\r\n                if (this.mode == \"view\" && this.t > 0 && !this.isBusy) {\r\n\t\t\t\t\tthis.t --\r\n\t\t\t\t\tthis.resetMinimap()\r\n\t\t\t\t\tthis.updateMap()\r\n\t\t\t\t}\r\n                break;\r\n        }\r\n    }\r\n\t\r\n\tonKeyDown (event) {\r\n\t\t// 任何都会导致punk无法拾取lowb\r\n        // this.pickButton.interactable = false\r\n\t\tif (this.isBusy) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tswitch(event.keyCode) {\r\n            case cc.macro.KEY.h:\r\n\t\t\tcase cc.macro.KEY.left:\r\n\t\t\t    if (this.mode == \"schedule\") {\r\n\t\t\t      this.commitMove(this.player.x/64-1, this.player.y/64, Action.GoLeft)\r\n\t\t        }\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.updateMap()\r\n\t\t\t\t}\r\n\t\t\t\tthis.player.getComponent('Player').moveWest()\r\n                break;\r\n            case cc.macro.KEY.l:\r\n\t\t\tcase cc.macro.KEY.right:\r\n\t\t\t    if (this.mode == \"schedule\") {\r\n\t\t\t      this.commitMove(this.player.x/64+1, this.player.y/64, Action.GoRight)\r\n\t\t        }\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.updateMap()\r\n\t\t\t\t}\r\n                this.player.getComponent('Player').moveEast()\r\n                break;\r\n\t\t    case cc.macro.KEY.k:\r\n\t\t\tcase cc.macro.KEY.down:\r\n                if (this.mode == \"schedule\") {\r\n\t\t\t      this.commitMove(this.player.x/64, this.player.y/64-1, Action.GoDown)\r\n\t\t        }\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.updateMap()\r\n\t\t\t\t}\r\n\t\t\t\tthis.player.getComponent('Player').moveSouth()\r\n                break;\r\n            case cc.macro.KEY.j:\r\n\t\t\tcase cc.macro.KEY.up:\r\n                if (this.mode == \"schedule\") {\r\n\t\t\t      this.commitMove(this.player.x/64, this.player.y/64+1, Action.GoUp)\r\n\t\t        }\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.updateMap()\r\n\t\t\t\t}\r\n\t\t\t\tthis.player.getComponent('Player').moveNorth()\r\n                break;\r\n\t\t\tcase cc.macro.KEY.y:\r\n\t\t\t    if (this.mode == \"schedule\") {\r\n\t\t\t      this.commitMove(this.player.x/64-1, this.player.y/64+1, Action.GoLeftUp)\r\n\t\t        }\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.updateMap()\r\n\t\t\t\t}\r\n\t\t\t\tthis.player.getComponent('Player').moveNorthWest()\r\n                break;\r\n            case cc.macro.KEY.n:\r\n\t\t\t    if (this.mode == \"schedule\") {\r\n\t\t\t      this.commitMove(this.player.x/64+1, this.player.y/64-1, Action.GoRightDown)\r\n\t\t        }\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.updateMap()\r\n\t\t\t\t}\r\n                this.player.getComponent('Player').moveSouthEast()\r\n                break;\r\n\t\t    case cc.macro.KEY.u:\r\n                if (this.mode == \"schedule\") {\r\n\t\t\t      this.commitMove(this.player.x/64+1, this.player.y/64+1, Action.GoRightUp)\r\n\t\t        }\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.updateMap()\r\n\t\t\t\t}\r\n\t\t\t\tthis.player.getComponent('Player').moveNorthEast()\r\n                break;\r\n            case cc.macro.KEY.b:\r\n                if (this.mode == \"schedule\") {\r\n\t\t\t      this.commitMove(this.player.x/64-1, this.player.y/64-1, Action.GoLeftDown)\r\n\t\t        }\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.updateMap()\r\n\t\t\t\t}\r\n\t\t\t\tthis.player.getComponent('Player').moveSouthWest()\r\n                break;\r\n\t\t\tcase cc.macro.KEY['+']:\r\n                if (this.mode == \"view\" && !this.isBusy) {\r\n\t\t\t\t\tthis.t ++\r\n\t\t\t\t\tthis.resetMinimap()\r\n\t\t\t\t\tthis.updateMap()\r\n\t\t\t\t}\r\n                break;\r\n            case cc.macro.KEY['-']:\r\n                if (this.mode == \"view\" && this.t > 0 && !this.isBusy) {\r\n\t\t\t\t\tthis.t --\r\n\t\t\t\t\tthis.resetMinimap()\r\n\t\t\t\t\tthis.updateMap()\r\n\t\t\t\t}\r\n                break;\r\n        }\r\n    },\r\n\t\r\n\tonTouchMove(t){\r\n\t\tif (this.mode == \"view\") {\r\n\t\t\tlet delta = t.getDelta();\r\n            this.player.x -= delta.x;\r\n            this.player.y -= delta.y;\r\n\t\t}\r\n    },\r\n\t\r\n\tonTouchEnd(t){\r\n\t\tif (this.mode == \"view\") {\r\n\t\t\tthis.updateMap()\r\n\t\t}\r\n    },\r\n\t\r\n\tsetMiniMap(x_, y_, gid_) {\r\n\t\t//cc.log(x_, y_, gid_)\r\n\t\tlet x = x_ - this.minimapCenter.x + 25\r\n\t\tlet y = y_ - this.minimapCenter.y + 25\r\n\t\tif (x>=0 && x<=50 && y>=0 && y<=50) {\r\n\t\t\tthis.tiledLayer.setTileGIDAt(gid_, x, 50-y, 0)\r\n\t\t}\r\n\t}\r\n\t\r\n\tonLoad () {\r\n\t\tthis.label.node.zIndex = 5;\r\n\t\tthis.time_button_group.zIndex = 5;\r\n\t\tthis.button_group_2.zIndex = 5;\r\n\t\tthis.gameMap.node.zIndex = 2;\r\n\t\tthis.swapButton.interactable = false\r\n\t\tthis.makeButton.interactable = false\r\n\t\tthis.useButton.interactable = false\r\n\t\t// 生成草地\r\n        //let windowSize=cc.view.getVisibleSize();\r\n        //cc.log(\"width=\"+windowSize.width+\",height=\"+windowSize.height);\r\n\t\tfor (let i=-9; i<=9; i++) {\r\n\t\t\tfor (let j=-6; j<=6; j++) {\r\n\t\t\t\tthis.spawnNewGrass(i*64, j*64);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfor (let i=-2; i<=2; i++) {\r\n\t\t\tthis.spawnTimeButton(64*i, 0, i+2)\r\n\t\t}\r\n\t\t\r\n\t\tthis.tiledLayer = this.smallMap.getLayer(\"background\")\r\n\r\n\t\t// 初始化键盘输入监听\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n\r\n    },\r\n\r\n    start () {\r\n        // init logic\r\n\t\tconst lang = cc.sys.localStorage.getItem('lang')\r\n\t\tthis.messageLabel.string = (lang === 'zh'? '游戏消息\\n' : 'Game Message\\n')\r\n\t\tthis.loadPunk()\r\n\t\tthis.getStatus()\r\n    }\r\n}\r\n"]}