{"version":3,"sources":["assets\\Script\\Game.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const {ccclass, property} = cc._decorator;\r\nimport {ethers} from 'ethers/dist/ethers.umd.min.js';\r\n\r\nenum Status {Schedule, Committing, Committed, Confirmmed};\r\nenum Action {SitStill, GoLeft, GoRight, GoUp, GoDown, GoLeftUp, GoLeftDown, GoRightUp, GoRightDown};\r\n\r\n@ccclass\r\nexport default class Game extends cc.Component {\r\n\t\r\n\tid: number = 0;\r\n\tt: number = 0;\r\n\tcurrentSchedule: number = 0;\r\n\ttoCommit: number = 0;\r\n\tbalance: number = 0;\r\n\tgold: number = 0;\r\n\tminimapSize: number = 51;\r\n\tmapSize: number = 51;\r\n\tplayerAddress: string = \"\";\r\n\tmode: string = \"view\";\r\n\thasEvents: bool = false;\r\n\tisBusy: bool = false;\r\n\trogueLandAddress: string = '0x7066F9F9C8130405C32Ae1045AeFb4B45b11C30f';\r\n\trogueLandContract: any = null;\r\n\tprovider: any = null;\r\n\twallet: any = null;\r\n\tplayerInfo: any = {x: 0, y: 0, t: 0};\r\n\ttoPick: any = {x: 0, y: 0};\r\n\tminimapCenter: any = {x: 0, y: 0};\r\n\ttimeList: any[] = [];\r\n\tnumberList: any[] = [];\r\n\tpunks: any[] = [];\r\n\tchests: any[] = [];\r\n\ttiledLayer : cc.TiledLayer = null;\r\n\t\r\n\t@property(cc.Label)\r\n    label: cc.Label = null;\r\n\t\r\n\t@property(cc.Label)\r\n    switchLabel: cc.Label = null;\r\n\t\r\n\t@property(cc.Button)\r\n    modeButton: cc.Button = null;\r\n\t\r\n\t@property(cc.Button)\r\n    swapButton: cc.Button = null;\r\n\t\r\n\t@property(cc.Button)\r\n    pickButton: cc.Button = null;\r\n\t\r\n\t@property(cc.TiledMap)\r\n    smallMap: cc.TiledMap = null;\r\n\r\n    @property\r\n    text: string = 'hello';\r\n\t\r\n\t@property(cc.Prefab)\r\n    grassPrefab: cc.Prefab = null;\r\n\t\r\n\t@property(cc.Prefab)\r\n    crossPrefab: cc.Prefab = null;\r\n\t\r\n\t@property(cc.Prefab)\r\n    chestPrefab: cc.Prefab = null;\r\n\t\r\n\t@property(cc.Prefab)\r\n    numberPrefab: cc.Prefab = null;\r\n\t\r\n\t@property(cc.Prefab)\r\n    punkPrefab: cc.Prefab = null;\r\n\t\r\n\t@property(cc.Prefab)\r\n    putGoldPrefab: cc.Prefab = null;\r\n\t\r\n\t@property(cc.JsonAsset)\r\n    rogueLandJson: cc.JsonAsset = null;\r\n\t\r\n\t@property(cc.JsonAsset)\r\n    loserpunkJson: cc.JsonAsset = null;\r\n\t\r\n\t// Player 节点，用于获取主角的位置\r\n\t@property(cc.Node)\r\n    player: cc.Node = null;\r\n\t\r\n\t// 放置时间按钮\r\n\t@property(cc.Node)\r\n    time_button_group: cc.Node = null;\r\n\t\r\n\t// 设置节点，用户交互按钮\r\n\t@property(cc.Node)\r\n    button_group_2: cc.Node = null;\r\n\t\r\n\t// Camera 节点，用于获取摄像头的位置\r\n\t@property(cc.Node)\r\n    camera: cc.Node = null;\r\n\t\r\n\tspawnNewDialog () {\r\n        // 使用给定的模板在场景中生成一个新节点\r\n        var newDialog = cc.instantiate(this.putGoldPrefab);\r\n        // 将新增的节点添加到 Canvas 节点下面\r\n        this.node.addChild(newDialog);\r\n\t\tnewDialog.zIndex = 5;\r\n        // 设置宝箱的位置\r\n        newDialog.setPosition(cc.v2(this.player.x, this.player.y));\r\n\t\t// 在对话框脚本组件上保存 Game 对象的引用\r\n        newDialog.getComponent('PutGoldDialog').game = this;\r\n    },\r\n\t\r\n\tspawnNewGrass (x, y) {\r\n        // 使用给定的模板在场景中生成一个新节点\r\n        var newGrass = cc.instantiate(this.grassPrefab);\r\n        // 将新增的节点添加到 Canvas 节点下面\r\n        this.node.addChild(newGrass);\r\n        // 设置草地的位置\r\n        newGrass.setPosition(cc.v2(x,y));\r\n\t\t// 在草地脚本组件上保存 Camera 对象的引用\r\n        newGrass.getComponent('Grass').camera = this.camera;\r\n\t\t\r\n\t\t//newGrass.on(cc.Node.EventType.TOUCH_START,function(t){cc.log(\"触摸开始\");},this)\r\n        //监听\r\n        newGrass.on(cc.Node.EventType.TOUCH_MOVE, this.onTouchMove, this);\r\n        newGrass.on(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this);\r\n        newGrass.on(cc.Node.EventType.TOUCH_CANCEL, this.onTouchEnd, this);\r\n    },\r\n\t\r\n\tspawnNewCross (n) {\r\n        for (let x=-n; x<=n; x++) {\r\n\t\t\t// 使用给定的模板在场景中生成一个新节点\r\n            var newCross1 = cc.instantiate(this.crossPrefab);\r\n            this.node.addChild(newCross1);\r\n            newCross1.setPosition(cc.v2(x*64,n*64));\r\n\t\t\tnewCross1.zIndex = 2;\r\n\t\t\tvar newCross2 = cc.instantiate(this.crossPrefab);\r\n            this.node.addChild(newCross2);\r\n            newCross2.setPosition(cc.v2(x*64,-n*64));\r\n\t\t\tnewCross2.zIndex = 2;\r\n\t\t}\r\n\t\tfor (let y=-n+1; y<n; y++) {\r\n\t\t\t// 使用给定的模板在场景中生成一个新节点\r\n            var newCross1 = cc.instantiate(this.crossPrefab);\r\n            this.node.addChild(newCross1);\r\n            newCross1.setPosition(cc.v2(n*64,y*64));\r\n\t\t\tnewCross1.zIndex = 2;\r\n\t\t\tvar newCross2 = cc.instantiate(this.crossPrefab);\r\n            this.node.addChild(newCross2);\r\n            newCross2.setPosition(cc.v2(-n*64,y*64));\r\n\t\t\tnewCross2.zIndex = 2;\r\n\t\t}\r\n    },\r\n\t\r\n\tspawnNewChest (x, y) {\r\n        // 使用给定的模板在场景中生成一个新节点\r\n        var newChest = cc.instantiate(this.chestPrefab);\r\n        // 将新增的节点添加到 Canvas 节点下面\r\n        this.node.addChild(newChest);\r\n\t\tnewChest.zIndex = 2;\r\n        // 设置宝箱的位置\r\n        newChest.setPosition(cc.v2(x,y));\r\n\t\t\r\n\t\tthis.chests.push(newChest)\r\n    },\r\n\t\r\n\tspawnNewPunk (x, y, id) {\r\n        //cc.log(x, y, id.toString())\r\n\t\t// 使用给定的模板在场景中生成一个新节点\r\n        var newPunk = cc.instantiate(this.punkPrefab);\r\n        // 将新增的节点添加到 Canvas 节点下面\r\n        this.node.addChild(newPunk);\r\n\t\tnewPunk.zIndex = 2;\r\n        // 设置punk的位置\r\n        newPunk.setPosition(cc.v2(x,y));\r\n\t\tthis.punks.push(newPunk)\r\n\t\t\r\n\t\tif (id > 0) {\r\n\t\t\t//console.log(this.loserpunkJson.json[id-1])\r\n\t\t\tlet remoteUrl = \"https://www.losernft.org/ipfs/\"+this.loserpunkJson.json[id-1].hash\r\n\t\t\tlet sprite = newPunk.getComponent(cc.Sprite)\r\n\t\t\tcc.assetManager.loadRemote<cc.Texture2D>(remoteUrl, { ext: '.png', cacheEnabled: true }, function (err, pic) {\r\n              if (err) {\r\n                cc.log('LoadNetImg load error,error:' + err)\r\n                return\r\n              }\r\n              sprite.spriteFrame = new cc.SpriteFrame(pic)\r\n            });\r\n\t\t}\r\n    },\r\n\t\r\n\tasync spawnNewNumber (x, y, action) {\r\n\t\tif (this.balance < 0) return;\r\n\t\t// 使用给定的模板在场景中生成一个新节点\r\n        var newNumber = cc.instantiate(this.numberPrefab)\r\n        // 将新增的节点添加到 Canvas 节点下面\r\n        this.node.addChild(newNumber)\r\n\t\tnewNumber.zIndex = 2\r\n        // 设置数字的位置\r\n        newNumber.setPosition(cc.v2(x,y))\r\n\t\tlet color = new cc.Color(242,129,27)\r\n\t\tnewNumber.color = color\r\n\t\t// 增加1回合\r\n\t\tthis.t ++\r\n\t\tnewNumber.getComponent(cc.Label).string = this.t\r\n\t\tthis.numberList[this.t-this.currentSchedule-1] = {time: this.t, action: action, status: Status.Schedule, number: newNumber}\r\n\t\t// 更新地图\r\n\t\tthis.resetMinimap()\r\n\t\tthis.updateMap()\r\n\t\t// 自动提交\r\n\t\tthis.commit()\r\n    },\r\n\t\r\n\tspawnTimeButton (x, y, t) {\r\n\t\t// 使用给定的模板在场景中生成一个新节点\r\n        var newNumber = cc.instantiate(this.numberPrefab)\r\n        // 将新增的节点添加到 Canvas 节点下面\r\n        this.time_button_group.addChild(newNumber)\r\n        // 设置数字的位置\r\n        newNumber.setPosition(cc.v2(x,y))\r\n\t\tlet color = new cc.Color(255,255,255)\r\n\t\tnewNumber.color = color\r\n\t\tnewNumber.getComponent(cc.Label).string = t\r\n\t\tnewNumber.on(cc.Node.EventType.TOUCH_START, function(event){\r\n\t\t\tif (this.mode == 'view') {\r\n\t\t\t\tthis.t = newNumber.getComponent(cc.Label).string;\r\n\t\t\t    this.resetMinimap()\r\n\t\t\t\tthis.updateMap()\r\n\t\t\t}\r\n\t\t\tcc.log(newNumber.getComponent(cc.Label).string);\r\n\t\t}, this)\r\n\t\tthis.timeList[t] = newNumber\r\n    },\r\n\t\r\n\tchangeTimeButton () {\r\n\t\tlet t = this.t<2 ? 2 : this.t\r\n\t\tfor (let i=0; i<5; i++) {\r\n\t\t\tthis.timeList[i].getComponent(cc.Label).string = t-2+i\r\n\t\t\tif (t-2+i == this.t) {\r\n\t\t\t\tthis.timeList[i].getComponent(cc.Label).fontSize = 30\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.timeList[i].getComponent(cc.Label).fontSize = 20\r\n\t\t\t}\r\n\t\t\tif (t-2+i <= this.playerInfo.t) {\r\n\t\t\t\tlet color = new cc.Color(255,128,128)\r\n\t\t\t\tthis.timeList[i].color = color\r\n\t\t\t}\r\n\t\t\telse if (t-2+i <= this.currentSchedule) {\r\n\t\t\t\tlet color = new cc.Color(0,0,255)\r\n\t\t\t\tthis.timeList[i].color = color\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tlet color = new cc.Color(255,255,255)\r\n\t\t\t\tthis.timeList[i].color = color\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tsetLabel (t, pos) {\r\n\t\tconst lang = cc.sys.localStorage.getItem('lang')\r\n\t\t\r\n\t\tif (this.isBusy) {\r\n\t\t\tif (lang === 'zh') {\r\n\t\t\t    this.text = \"更新中...\"\r\n\t\t    }\r\n\t\t\telse {\r\n\t\t\t\tthis.text = \"updating...\"\r\n\t\t\t}\t\t\t\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.text = `LOWB: ${this.gold} \\n OKT ${this.balance/1e18}`\r\n\t\t}\r\n\t\tthis.label.string = this.text;\r\n\t}\r\n\t\r\n\tasync commit () {\r\n\t\tlet action = this.numberList[this.toCommit-this.currentSchedule]\r\n\t\taction.status = Status.Committing\r\n\t\tconst rogueLandSigner = this.rogueLandContract.connect(this.wallet)\r\n\t\ttry {\r\n\t\t\tconst tx = await rogueLandSigner.scheduleAction(this.id, action.action, {gasLimit: 300000, gasPrice: 1000000000})\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tcc.log(e)\r\n\t\t}\r\n\t\taction.status = Status.Committed\r\n\t\taction.number.destroy()\r\n\t\tthis.toCommit ++;\r\n\t\tthis.balance = this.balance - 300000e9\r\n    },\r\n\t\r\n\tasync swap () {\r\n\t\tthis.swapButton.interactable = false\r\n\t\tconst rogueLandSigner = this.rogueLandContract.connect(this.wallet)\r\n\t\ttry {\r\n\t\t\tconst tx = await rogueLandSigner.swapGold(this.playerAddress, {gasPrice: 1000000000})\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tcc.log(e)\r\n\t\t}\r\n\t\tthis.balance = (this.balance/1e18 + 0.01)*1e18\r\n\t\tthis.gold = this.gold - 1000\r\n\t\t\r\n\t\tif (this.gold >= 1000) {\r\n\t\t\tthis.swapButton.interactable = true\r\n\t\t}\r\n    },\r\n\t\r\n\tasync pick () {\r\n        if (this.balance < 0) return;\r\n\t\tthis.pickButton.interactable = false\r\n\t\tconst rogueLandSigner = this.rogueLandContract.connect(this.wallet)\r\n\t\ttry {\r\n\t\t\tconst tx = await rogueLandSigner.getGold(this.toPick.x, this.toPick.y, {gasLimit: 150000, gasPrice: 1000000000})\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tcc.log(e)\r\n\t\t}\r\n\t\t\r\n\t\tthis.balance = this.balance - 150000e9\r\n\t\t//cc.log(tx.gasPrice/1e9*tx.gasLimit)\r\n\t\t//this.getEvent()\r\n    },\r\n\t\r\n\tasync put () {\r\n        cc.log('put gold')\r\n\t\tif (this.balance < 0) return;\r\n\t\tconst rogueLandSigner = this.rogueLandContract.connect(this.wallet)\r\n\t\ttry {\r\n\t\t\tconst tx = await rogueLandSigner.putGold({gasPrice: 1000000000})\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tcc.log(e)\r\n\t\t}\r\n\t\t\r\n\t\t//this.balance = this.balance - tx.gasPrice*tx.gasLimit\r\n\t\tthis.gold = Number(this.gold) + 100\r\n\t\t//cc.log(tx.gasPrice/1e9*tx.gasLimit)\r\n\t\tthis.updateMap()\r\n\t\t//this.getGoldInfo()\r\n    },\r\n\t\r\n\tasync loadPunk () {\r\n        let myPunk = JSON.parse(cc.sys.localStorage.getItem('myPunk'))\r\n\t\tif (myPunk.id > 0) {\r\n\t\t  this.id = myPunk.id\r\n\t\t  let sprite = this.node.getChildByName('Player').getComponent(cc.Sprite)\r\n\t      cc.assetManager.loadRemote<cc.Texture2D>(myPunk.uri, { ext: '.png', cacheEnabled: true }, function (err, pic) {\r\n            if (err) {\r\n              cc.log('LoadNetImg load error,error:' + err)\r\n              return\r\n            }\r\n            sprite.spriteFrame = new cc.SpriteFrame(pic)\r\n          });\r\n\t\t}\r\n\t\telse {\r\n\t\t\tcc.log(\"no punk\")\r\n\t\t}\r\n    },\r\n\t\r\n\tasync getStatus () {\r\n\t\tlet walletData = JSON.parse(cc.sys.localStorage.getItem('wallet'))\r\n\t\tconst walletPrivateKey = new ethers.Wallet(walletData.privateKey)\r\n\t\tthis.playerAddress = walletData.address;\r\n\t\tthis.provider = new ethers.providers.JsonRpcProvider(\"https://exchaintestrpc.okex.org\")\r\n\t\tthis.wallet = walletPrivateKey.connect(this.provider)\r\n\t\tthis.rogueLandContract = new ethers.Contract(this.rogueLandAddress, this.rogueLandJson.json.abi, this.provider)\r\n\t\tif (this.id > 0) {\r\n\t\t\tthis.getEvent()\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.modeButton.interactable = false\r\n\t\t\tthis.goViewMode()\r\n\t\t}\r\n\t\tthis.mapSize = await this.rogueLandContract.mapSize()\r\n\t\tthis.spawnNewCross(Number(this.mapSize)+1)\r\n    },\r\n\t\r\n\tsetMinimapBoundary () {\r\n\t\tconst n = Number(this.mapSize)+1\r\n\t\tfor (let x=-n; x<=n; x++) {\r\n\t\t\tthis.setMiniMap(x, n, 2)\r\n\t\t\tthis.setMiniMap(x, -n, 2)\r\n\t\t}\r\n\t\tfor (let y=-n+1; y<n; y++) {\r\n\t\t\tthis.setMiniMap(n, y, 2)\r\n\t\t\tthis.setMiniMap(-n, y, 2)\r\n\t\t}\r\n\t}\r\n\t\r\n\tresetMinimap () {\r\n\t\tfor (let i=0; i<=50; i++) {\r\n\t\t\tfor (let j=0; j<=50; j++) {\r\n\t\t\t\tthis.tiledLayer.setTileGIDAt(1, i, j, 0)\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setMinimapBoundary()\r\n\t}\r\n\t\r\n\tloadAccount (e, msg) {\r\n\t\tcc.director.loadScene(\"user\");\r\n    },\r\n\t\r\n\tasync updateMap () {\r\n      this.changeTimeButton()\r\n\t  if (!this.isBusy) {\r\n\t\tthis.isBusy = true;\r\n\t\tconst center = this.getPosition()\r\n\t\tlet x1 = center.x - 7\r\n\t\tlet x2 = center.x + 7\r\n\t\tlet y1 = center.y - 5\r\n\t\tlet y2 = center.y + 5\r\n\t\tconst map = await this.rogueLandContract.getEvents(x1, y1, x2, y2, this.t)\r\n\t\twhile (this.punks.length > 0) {\r\n\t\t\tlet node = this.punks.pop()\r\n\t\t\tnode.destroy();\r\n\t\t}\r\n\t\twhile (this.chests.length > 0) {\r\n\t\t\tlet node = this.chests.pop()\r\n\t\t\tnode.destroy();\r\n\t\t}\r\n\t\tlet i = 0\r\n        for (let x=x1; x<=x2; x++) {\r\n          for (let y=y1; y<=y2; y++) {\r\n            if (map[i].movingPunk != 0 && !(this.mode == \"schedule\" && map[i].movingPunk == this.id)) {\r\n\t\t\t  //cc.log(map[i].movingPunk, x, y)\r\n\t\t\t  this.spawnNewPunk (x*64, y*64, map[i].movingPunk)\r\n\t\t\t  this.setMiniMap(x, y, 4)\r\n            }\r\n\t\t\tif (map[i].monster > 0) {\r\n\t\t\t  //cc.log(map[i].monster/1e18, x, y)\r\n\t\t\t  this.spawnNewChest (x*64, y*64)\r\n\t\t\t  this.setMiniMap(x, y, 3)\r\n            }\r\n            i ++;\r\n          }\r\n        }\r\n\t\tthis.setMiniMap(this.playerInfo.x, this.playerInfo.y, 5)\r\n\t\tthis.isBusy = false;\r\n\t  }\r\n\t  else {\r\n\t\t  cc.log('isBusy')\r\n\t  }\r\n\t}\r\n\t\r\n\tasync getEvent() {\r\n\t\tconst statusInfo = await this.rogueLandContract.getEvent(this.id)\r\n\t\t//cc.log(statusInfo)\r\n\t\tif (statusInfo.t != 0) {\r\n\t\t\tthis.t = statusInfo.t\r\n\t\t    this.player.zIndex = 4\r\n\t\t    this.player.x = statusInfo.x * 64\r\n\t\t    this.player.y = statusInfo.y * 64\r\n\t\t    this.resetMinimap()\r\n\t\t\tthis.updateMap()\r\n\t\t\tthis.toPick.x = statusInfo.x\r\n\t\t\tthis.toPick.y = statusInfo.y\r\n\t\t\tthis.hasEvents = true\r\n\t\t\tthis.pickButton.interactable = true\r\n\t\t\tconst myPunk = await this.rogueLandContract.stillPunks(this.id)\r\n\t\t\tthis.gold = myPunk.gold\r\n\t\t\tif (this.gold >= 1000) {\r\n\t\t\t    this.swapButton.interactable = true\r\n\t\t    }\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.hasEvents = false\r\n\t\t\tthis.pickButton.interactable = false\r\n\t\t\tthis.goViewMode()\r\n\t\t}\r\n\t}\r\n\t\r\n\tasync getGoldInfo() {\r\n\t\tconst blockNumber = await this.provider.getBlockNumber()\r\n\t\tconst validBlockToPutGold = await this.rogueLandContract.validBlockToPutGold()\r\n\t\tcc.log(validBlockToPutGold, blockNumber)\r\n\t\tif (blockNumber >= validBlockToPutGold && this.id > 0) {\r\n\t\t\tthis.spawnNewDialog()\r\n\t\t}\r\n\t}\r\n\t\r\n\tasync goViewMode() {\r\n\t\tthis.getGoldInfo()\r\n\t\tif (this.hasEvents) {\r\n\t\t\tthis.getEvent()\r\n\t\t}\r\n\t\telse {\r\n\t\t\tconst statusInfo = await this.rogueLandContract.getCurrentStatus(this.id)\r\n\t\t    this.mode = \"view\"\r\n\t\t\tthis.t = statusInfo.t\r\n\t\t\tthis.playerInfo.t = statusInfo.t\r\n\t\t\tthis.playerInfo.x = statusInfo.x\r\n\t\t\tthis.playerInfo.y = statusInfo.y\r\n\t\t    this.player.zIndex = 0\r\n\t\t    this.player.x = statusInfo.x * 64\r\n\t\t    this.player.y = statusInfo.y * 64\r\n\t\t\tthis.minimapCenter.x = statusInfo.x\r\n\t\t\tthis.minimapCenter.y = statusInfo.y\r\n\t\t    this.resetMinimap()\r\n\t\t\tthis.updateMap()\r\n\t\t\tconst myPunk = await this.rogueLandContract.stillPunks(this.id)\r\n\t\t\tthis.gold = myPunk.gold\r\n            if (this.gold >= 1000) {\r\n\t\t\t    this.swapButton.interactable = true\r\n\t\t    }\r\n\t\t\tthis.balance = await this.wallet.getBalance();\r\n\t\t}\r\n\t}\r\n\t\r\n\tasync goScheduleMode() {\r\n\t\tconst statusInfo = await this.rogueLandContract.getScheduleInfo(this.id)\r\n\t\tthis.mode = \"schedule\"\r\n\t\tthis.t = statusInfo.t\r\n\t\tthis.currentSchedule = statusInfo.t\r\n\t\tthis.player.zIndex = 4\r\n\t\tthis.toCommit = statusInfo.t\r\n\t\tthis.player.x = statusInfo.x * 64\r\n\t\tthis.player.y = statusInfo.y * 64\r\n\t\tthis.resetMinimap()\r\n\t\tthis.updateMap()\r\n\t}\r\n\t\r\n\tswitchMode (e, msg) {\r\n        const lang = cc.sys.localStorage.getItem('lang')\r\n\t\tif (this.mode == \"view\" && this.id > 0) {\r\n\t\t\tthis.goScheduleMode()\r\n\t\t\tif (lang === 'zh') {\r\n\t\t\t    this.switchLabel.string = \"退出规划\"\r\n\t\t    }\r\n\t\t    else {\r\n\t\t\t    this.switchLabel.string = \"View Mode\"\r\n\t\t    }\r\n\t\t}\r\n\t\telse if (this.mode == \"schedule\") {\r\n\t\t\tthis.goViewMode()\r\n\t\t\tif (lang === 'zh') {\r\n\t\t\t    this.switchLabel.string = \"准备行动\"\r\n\t\t    }\r\n\t\t    else {\r\n\t\t\t    this.switchLabel.string = \"Take Actions\"\r\n\t\t    }\r\n\t\t}\r\n    },\r\n\t\r\n\tsetPosition (node, x, y) {\r\n\t\tnode.x = x\r\n\t\tnode.y = y\r\n\t}\r\n\t\r\n\tgetPosition () {\r\n\t\treturn {x: Math.round(this.player.x/64), y: Math.round(this.player.y/64)}\r\n\t}\r\n    \r\n\tupdate(dt) {\r\n\t\tlet x = this.player.x\r\n\t\tlet y = this.player.y\r\n\t\tthis.setPosition(this.camera, x, y)\r\n\t\tthis.setPosition(this.label.node, x-300, y+250)\r\n\t\tthis.setPosition(this.time_button_group, x, y-280)\r\n\t\tthis.setPosition(this.button_group_2, x+330, y+140)\r\n\t\tthis.setLabel(this.t, this.getPosition())\r\n\t\tif (this.mode == \"schedule\") {this.setPosition(this.playerInfo, x/64, y/64)}\r\n\t}\r\n\t\r\n\tclick_arrow (e, msg) {\r\n\t\t// 任何都会导致punk无法拾取lowb\r\n        // this.pickButton.interactable = false\r\n\t\tif (this.numberList[this.toCommit-this.currentSchedule] && this.mode == \"schedule\") {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tswitch(msg) {\r\n\t\t\tcase \"left\":\r\n\t\t\t    if (this.mode == \"schedule\") {\r\n\t\t\t      this.spawnNewNumber(this.player.x, this.player.y, Action.GoLeft)\r\n\t\t        }\r\n\t\t\t\tthis.player.getComponent('Player').moveWest()\r\n                break;\r\n            case \"right\":\r\n\t\t\t    if (this.mode == \"schedule\") {\r\n\t\t\t      this.spawnNewNumber(this.player.x, this.player.y, Action.GoRight)\r\n\t\t        }\r\n                this.player.getComponent('Player').moveEast()\r\n                break;\r\n\t\t    case \"down\":\r\n                if (this.mode == \"schedule\") {\r\n\t\t\t      this.spawnNewNumber(this.player.x, this.player.y, Action.GoDown)\r\n\t\t        }\r\n\t\t\t\tthis.player.getComponent('Player').moveSouth()\r\n                break;\r\n            case \"up\":\r\n                if (this.mode == \"schedule\") {\r\n\t\t\t      this.spawnNewNumber(this.player.x, this.player.y, Action.GoUp)\r\n\t\t        }\r\n\t\t\t\tthis.player.getComponent('Player').moveNorth()\r\n                break;\r\n\t\t\tcase \"left-up\":\r\n\t\t\t    if (this.mode == \"schedule\") {\r\n\t\t\t      this.spawnNewNumber(this.player.x, this.player.y, Action.GoLeftUp)\r\n\t\t        }\r\n\t\t\t\tthis.player.getComponent('Player').moveNorthWest()\r\n                break;\r\n            case \"right-down\":\r\n\t\t\t    if (this.mode == \"schedule\") {\r\n\t\t\t      this.spawnNewNumber(this.player.x, this.player.y, Action.GoRightDown)\r\n\t\t        }\r\n                this.player.getComponent('Player').moveSouthEast()\r\n                break;\r\n\t\t    case \"right-up\":\r\n                if (this.mode == \"schedule\") {\r\n\t\t\t      this.spawnNewNumber(this.player.x, this.player.y, Action.GoRightUp)\r\n\t\t        }\r\n\t\t\t\tthis.player.getComponent('Player').moveNorthEast()\r\n                break;\r\n            case \"left-down\":\r\n                if (this.mode == \"schedule\") {\r\n\t\t\t      this.spawnNewNumber(this.player.x, this.player.y, Action.GoLeftDown)\r\n\t\t        }\r\n\t\t\t\tthis.player.getComponent('Player').moveSouthWest()\r\n                break;\r\n\t\t\tcase \"+\":\r\n                if (this.mode == \"view\" && !this.isBusy) {\r\n\t\t\t\t\tthis.t ++\r\n\t\t\t\t\tthis.resetMinimap()\r\n\t\t\t\t\tthis.updateMap()\r\n\t\t\t\t}\r\n                break;\r\n            case \"-\":\r\n                if (this.mode == \"view\" && this.t > 0 && !this.isBusy) {\r\n\t\t\t\t\tthis.t --\r\n\t\t\t\t\tthis.resetMinimap()\r\n\t\t\t\t\tthis.updateMap()\r\n\t\t\t\t}\r\n                break;\r\n        }\r\n    }\r\n\t\r\n\tonKeyDown (event) {\r\n\t\t// 任何都会导致punk无法拾取lowb\r\n        // this.pickButton.interactable = false\r\n\t\tif (this.numberList[this.toCommit-this.currentSchedule] && this.mode == \"schedule\") {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tswitch(event.keyCode) {\r\n            case cc.macro.KEY.h:\r\n\t\t\tcase cc.macro.KEY.left:\r\n\t\t\t    if (this.mode == \"schedule\") {\r\n\t\t\t      this.spawnNewNumber(this.player.x, this.player.y, Action.GoLeft)\r\n\t\t        }\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.updateMap()\r\n\t\t\t\t}\r\n\t\t\t\tthis.player.getComponent('Player').moveWest()\r\n                break;\r\n            case cc.macro.KEY.l:\r\n\t\t\tcase cc.macro.KEY.right:\r\n\t\t\t    if (this.mode == \"schedule\") {\r\n\t\t\t      this.spawnNewNumber(this.player.x, this.player.y, Action.GoRight)\r\n\t\t        }\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.updateMap()\r\n\t\t\t\t}\r\n                this.player.getComponent('Player').moveEast()\r\n                break;\r\n\t\t    case cc.macro.KEY.k:\r\n\t\t\tcase cc.macro.KEY.down:\r\n                if (this.mode == \"schedule\") {\r\n\t\t\t      this.spawnNewNumber(this.player.x, this.player.y, Action.GoDown)\r\n\t\t        }\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.updateMap()\r\n\t\t\t\t}\r\n\t\t\t\tthis.player.getComponent('Player').moveSouth()\r\n                break;\r\n            case cc.macro.KEY.j:\r\n\t\t\tcase cc.macro.KEY.up:\r\n                if (this.mode == \"schedule\") {\r\n\t\t\t      this.spawnNewNumber(this.player.x, this.player.y, Action.GoUp)\r\n\t\t        }\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.updateMap()\r\n\t\t\t\t}\r\n\t\t\t\tthis.player.getComponent('Player').moveNorth()\r\n                break;\r\n\t\t\tcase cc.macro.KEY.y:\r\n\t\t\t    if (this.mode == \"schedule\") {\r\n\t\t\t      this.spawnNewNumber(this.player.x, this.player.y, Action.GoLeftUp)\r\n\t\t        }\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.updateMap()\r\n\t\t\t\t}\r\n\t\t\t\tthis.player.getComponent('Player').moveNorthWest()\r\n                break;\r\n            case cc.macro.KEY.n:\r\n\t\t\t    if (this.mode == \"schedule\") {\r\n\t\t\t      this.spawnNewNumber(this.player.x, this.player.y, Action.GoRightDown)\r\n\t\t        }\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.updateMap()\r\n\t\t\t\t}\r\n                this.player.getComponent('Player').moveSouthEast()\r\n                break;\r\n\t\t    case cc.macro.KEY.u:\r\n                if (this.mode == \"schedule\") {\r\n\t\t\t      this.spawnNewNumber(this.player.x, this.player.y, Action.GoRightUp)\r\n\t\t        }\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.updateMap()\r\n\t\t\t\t}\r\n\t\t\t\tthis.player.getComponent('Player').moveNorthEast()\r\n                break;\r\n            case cc.macro.KEY.b:\r\n                if (this.mode == \"schedule\") {\r\n\t\t\t      this.spawnNewNumber(this.player.x, this.player.y, Action.GoLeftDown)\r\n\t\t        }\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.updateMap()\r\n\t\t\t\t}\r\n\t\t\t\tthis.player.getComponent('Player').moveSouthWest()\r\n                break;\r\n\t\t\tcase cc.macro.KEY['+']:\r\n                if (this.mode == \"view\" && !this.isBusy) {\r\n\t\t\t\t\tthis.t ++\r\n\t\t\t\t\tthis.resetMinimap()\r\n\t\t\t\t\tthis.updateMap()\r\n\t\t\t\t}\r\n                break;\r\n            case cc.macro.KEY['-']:\r\n                if (this.mode == \"view\" && this.t > 0 && !this.isBusy) {\r\n\t\t\t\t\tthis.t --\r\n\t\t\t\t\tthis.resetMinimap()\r\n\t\t\t\t\tthis.updateMap()\r\n\t\t\t\t}\r\n                break;\r\n        }\r\n    },\r\n\t\r\n\tonTouchMove(t){\r\n\t\tif (this.mode == \"view\") {\r\n\t\t\tlet delta = t.getDelta();\r\n            this.player.x -= delta.x;\r\n            this.player.y -= delta.y;\r\n\t\t}\r\n    },\r\n\t\r\n\tonTouchEnd(t){\r\n\t\tif (this.mode == \"view\") {\r\n\t\t\tthis.updateMap()\r\n\t\t}\r\n    },\r\n\t\r\n\tsetMiniMap(x_, y_, gid_) {\r\n\t\tcc.log(x_, y_, gid_)\r\n\t\tlet x = x_ - this.minimapCenter.x + 25\r\n\t\tlet y = y_ - this.minimapCenter.y + 25\r\n\t\tif (x>=0 && x<=50 && y>=0 && y<=50) {\r\n\t\t\tthis.tiledLayer.setTileGIDAt(gid_, x, 50-y, 0)\r\n\t\t}\r\n\t}\r\n\t\r\n\tonLoad () {\r\n\t\tthis.label.node.zIndex = 3;\r\n\t\tthis.time_button_group.zIndex = 3;\r\n\t\tthis.button_group_2.zIndex = 3;\r\n\t\tthis.pickButton.interactable = false\r\n\t\tthis.swapButton.interactable = false\r\n\t\t// 生成草地\r\n        //let windowSize=cc.view.getVisibleSize();\r\n        //cc.log(\"width=\"+windowSize.width+\",height=\"+windowSize.height);\r\n\t\tfor (let i=-9; i<=9; i++) {\r\n\t\t\tfor (let j=-6; j<=6; j++) {\r\n\t\t\t\tthis.spawnNewGrass(i*64, j*64);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfor (let i=-2; i<=2; i++) {\r\n\t\t\tthis.spawnTimeButton(64*i, 0, i+2)\r\n\t\t}\r\n\t\t\r\n\t\tthis.tiledLayer = this.smallMap.getLayer(\"background\")\r\n\r\n\t\t// 初始化键盘输入监听\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n\r\n    },\r\n\r\n    start () {\r\n        // init logic\r\n        this.label.string = this.text\r\n\t\tthis.loadPunk()\r\n\t\tthis.getStatus()\r\n    }\r\n}\r\n"]}