{"version":3,"sources":["assets\\Script\\GoldDialog.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GoldDialog extends cc.Component {\r\n\t\r\n\tkind: number = 0;\r\n\t\r\n\t@property(cc.Label)\r\n    label: cc.Label = null;\r\n\t\r\n\t@property(cc.Label)\r\n    kindLabel: cc.Label = null;\r\n\t\r\n\t@property(cc.Button)\r\n    buildButton: cc.Button = null;\r\n\t\r\n\t@property(cc.Button)\r\n    buyButton: cc.Button = null;\r\n\t\r\n\tkindName(n) {\r\n\t    const lang = cc.sys.localStorage.getItem('lang')\r\n\t\tif (n == 0) {\r\n\t\t\tthis.buildButton.interactable = false\r\n\t\t\treturn lang === 'zh'? '空地': 'Open Space'\r\n\t\t}\r\n\t\telse if (n == 1) {\r\n\t\t\tthis.buildButton.interactable = true\r\n\t\t\treturn lang === 'zh'? '房屋': 'House'\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.buildButton.interactable = true\r\n\t\t\treturn lang === 'zh'? `${n-1}级矿场`: `Level ${n-1} Mine`\r\n\t\t}\r\n\t},\r\n\t\r\n\tsetLabel (info) {\r\n\t\tconst lang = cc.sys.localStorage.getItem('lang')\r\n\t\tconst kind = info.land.builtTime > info.block? info.land.oldBuilding : info.land.newBuilding;\r\n\t\tlet time =  Math.ceil((info.land.builtTime-info.block)/500)\r\n\t\tlet text;\r\n\t\tconst x = info.pos.x;\r\n\t\tconst y = info.pos.y;\r\n\t\tif (lang === 'zh') {\r\n\t\t\ttext = `坐标：(${x}, ${y})\\n地主：${info.land.owner.slice(0, 6)}`\r\n\t\t\tif (time > 0) {\r\n\t\t\t\ttext += `\\n正在建造：${this.kindName(info.land.newBuilding)}（还需${time}回合）`\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext = `Coordinate：(${x}, ${y})\\nOwner：${info.land.owner.slice(0, 6)}`\r\n\t\t\tif (time > 0) {\r\n\t\t\t\ttext += `\\nBuilding：${this.kindName(info.land.newBuilding)} (in ${time} rounds)`\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.label.string = text\r\n\t\tthis.kind = kind\r\n\t\tthis.kindLabel.string = this.kindName(this.kind)\r\n\t\tif (info.land.owner == '0x0000000000000000000000000000000000000000') {\r\n\t\t\tcc.log('no owner')\r\n\t\t\tif ((x**2>100 || y**2>100) && x**2<625 && y**2<625) {\r\n\t\t\t\tthis.buyButton.interactable = true\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (info.player.toLowerCase() == info.land.owner.toLowerCase()) {\r\n\t\t\tthis.buildButton.node.zIndex = 2\r\n\t\t}\r\n    },\r\n\t\r\n\tclose() {\r\n\t    cc.log('cancle')\r\n\t\tthis.node.destroy()\r\n\t},\r\n\t\r\n\tbuy() {\r\n\t    cc.log('buy')\r\n\t\tthis.buyButton.interactable = false\r\n\t\tthis.game.buyLand()\r\n\t},\r\n\t\r\n\tbuild() {\r\n\t    cc.log('build')\r\n\t\tthis.buildButton.interactable = false\r\n\t\tthis.game.build(this.kind%9-1)\r\n\t},\r\n\t\r\n\tinc_n() {\r\n\t    if (this.buildButton.node.zIndex == 2) {\r\n\t\t\tthis.kind ++\r\n\t\t    this.kindLabel.string = this.kindName(this.kind%9)\r\n\t\t}\r\n\t},\r\n\t\r\n\tdec_n() {\r\n\t    if (this.buildButton.node.zIndex == 2) {\r\n\t\t\tthis.kind += 8\r\n\t\t    this.kindLabel.string = this.kindName(this.kind%9)\r\n\t\t}\r\n\t},\r\n\t\r\n\tonLoad () {\r\n\t\tthis.buyButton.interactable = false\r\n    },\r\n\r\n    start () {\r\n        \r\n    }\r\n}"]}