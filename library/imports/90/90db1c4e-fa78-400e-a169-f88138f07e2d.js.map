{"version":3,"sources":["assets\\Script\\GoldDialog.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GoldDialog extends cc.Component {\r\n\t\r\n\tkind: number = 0;\r\n\t\r\n\t@property(cc.Label)\r\n    label: cc.Label = null;\r\n\t\r\n\t@property(cc.Label)\r\n    kindLabel: cc.Label = null;\r\n\t\r\n\t@property(cc.Button)\r\n    buildButton: cc.Button = null;\r\n\t\r\n\t@property(cc.Button)\r\n    buyButton: cc.Button = null;\r\n\t\r\n\t@property(cc.Button)\r\n    fishButton: cc.Button = null;\r\n\t\r\n\tkindName(n) {\r\n\t    const lang = cc.sys.localStorage.getItem('lang')\r\n\t\tif (n>=3 && n<6) {\r\n\t\t\tthis.buildButton.interactable = true\r\n\t\t\treturn lang === 'zh'? `${n%3+1}级矿场`: `Level ${n%3+1} Mine`\r\n\t\t}\r\n\t\telse if (n>=6 && n<9) {\r\n\t\t\tthis.buildButton.interactable = true\r\n\t\t\treturn lang === 'zh'? `${n%3+1}级渔场`: `Level ${n%3+1} Fishery`\r\n\t\t}\r\n\t\telse if (n>=9 && n<12) {\r\n\t\t\tthis.buildButton.interactable = true\r\n\t\t\treturn lang === 'zh'? `${n%3+1}级房屋`: `Level ${n%3+1} House`\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.buildButton.interactable = false\r\n\t\t\treturn lang === 'zh'? '空地': 'Open Space'\r\n\t\t}\r\n\t},\r\n\t\r\n\tsetLabel (info) {\r\n\t\tconst lang = cc.sys.localStorage.getItem('lang')\r\n\t\tconst kind = info.land.builtTime > info.block? info.land.oldBuilding : info.land.newBuilding;\r\n\t\tconst hp = info.land.builtTime > info.block? info.land.oldHP : info.land.newHP;\r\n\t\tlet time =  Math.ceil((info.land.builtTime-info.block)/500)\r\n\t\tlet text;\r\n\t\tconst x = info.pos.x;\r\n\t\tconst y = info.pos.y;\r\n\t\tif (lang === 'zh') {\r\n\t\t\ttext = `坐标：(${x}, ${y}) \\t 剩余：${hp} \\n地主：${info.land.owner.slice(0, 6)}`\r\n\t\t\tif (time > 0) {\r\n\t\t\t\ttext += `\\n正在建造：${this.kindName(info.land.newBuilding)}（还需${time}回合）`\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext = `Coordinate：(${x}, ${y})\\tLeft:${hp}\\nOwner：${info.land.owner.slice(0, 6)}`\r\n\t\t\tif (time > 0) {\r\n\t\t\t\ttext += `\\nBuilding：${this.kindName(info.land.newBuilding)} (in ${time} rounds)`\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.label.string = text\r\n\t\tthis.kind = kind\r\n\t\tthis.kindLabel.string = this.kindName(this.kind)\r\n\t\tcc.log(this.kind)\r\n\t\tif (kind >= 6 && kind < 9) {\r\n\t\t\tthis.fishButton.node.zIndex = 2\r\n\t\t}\r\n\t\telse if (info.land.owner == '0x0000000000000000000000000000000000000000') {\r\n\t\t\tif ((x**2>100 || y**2>100) && x**2<625 && y**2<625) {\r\n\t\t\t\tthis.buyButton.interactable = true\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (info.player.toLowerCase() == info.land.owner.toLowerCase()) {\r\n\t\t\tthis.buildButton.node.zIndex = 3\r\n\t\t}\r\n    },\r\n\t\r\n\tclose() {\r\n\t    cc.log('cancle')\r\n\t\tthis.node.destroy()\r\n\t},\r\n\t\r\n\tbuy() {\r\n\t    cc.log('buy')\r\n\t\tthis.buyButton.interactable = false\r\n\t\tthis.game.buyLand()\r\n\t},\r\n\t\r\n\tfish() {\r\n\t    cc.log('fish')\r\n\t\tthis.fishButton.interactable = false\r\n\t\tthis.game.fish()\r\n\t},\r\n\t\r\n\tbuild() {\r\n\t    cc.log('build')\r\n\t\tthis.buildButton.interactable = false\r\n\t\tthis.game.build(this.kind%12)\r\n\t},\r\n\t\r\n\tinc_n() {\r\n\t\tif (this.buildButton.node.zIndex == 3) {\r\n\t\t\tthis.kind ++\r\n\t\t\tif (this.kind%12 == 2) this.kind ++\r\n\t\t    this.kindLabel.string = this.kindName(this.kind%12)\r\n\t\t}\r\n\t},\r\n\t\r\n\tdec_n() {\r\n\t\tif (this.buildButton.node.zIndex == 3) {\r\n\t\t\tthis.kind += 11\r\n\t\t\tif (this.kind%12 == 2) this.kind --\r\n\t\t    this.kindLabel.string = this.kindName(this.kind%12)\r\n\t\t}\r\n\t},\r\n\t\r\n\tonLoad () {\r\n\t\tthis.buyButton.interactable = false\r\n    },\r\n\r\n    start () {\r\n        \r\n    }\r\n}"]}